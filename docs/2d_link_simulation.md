# 2次元ロボットアームのシミュレーション
## やりたいこと
- 2次元ロボットアームのモデルをシミュレーションで構築する
- 目標軌道に対して、それに随従するような制御のシミュレーションを行う

## シミュレーション手順（目標）
1. 2次元平面状の目標軌道を与える
2. 目標起動から逆運動学によって、目標角度、目標角速度を算出する
3. 現在の角度、角速度を観測する
4. 角度偏差、角速度偏差から制御測によって与えるトルクを求める
5. 運動方程式を使って、一定時間後の角度、角速度を算出する
6. 4.に戻る

## 準備
#### 三角関数の公式
- 加法定理
- 余弦定理
  - 三角形の辺と角度について以下の関係が成り立つ。
$$
    A^2 = B^2 + C^2 - 2BC\cos \theta
$$
$$
    \cos \theta = \frac{B^2 + C^2 - A^2}{2BC}
$$
![](2019-05-02-09-06-59.png)

## 順運動学・逆運動学
#### 順運動学
- 目的：リンクの角度と角速度から、先端の位置、速度を求める
- 記号の定義：
  - $q_1$: $x$軸と第一リンクの角度
  - $q_2$: 第一リンクと第二リンクの角度
  - $l_1$, $l_2$: 第一、第二リンクの長さ
  - $m_1$, $m_2$: 第一、第二リンクの質量
  - $P_1 = (x_1, y_1)$: 第一リンクの先端
  - $P_2 = (x_2, y_2)$: 第二リンクの先端

- 第一リンクの先端の座標は単純な三角関数の演算で算出できる
$$
    x_1 = l_1 \cos q_1 \\
    y_1 = l_1 \sin q_1
$$
- 第二リンクの先端は第一リンクの先端を起点にすると求まる
$$
    x_2 = x_1 + l_2 \cos (q_1 + q_2) \\
    y_2 = y_1 + l_2 \sin (q_1 + q_2)
$$

#### 逆運動学
- 目的：リンク先端の位置、速度から、リンクの角度、角速度を求める

